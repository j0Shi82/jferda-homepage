import fs from 'fs'
import { PurgeCSS } from 'purgecss'

const purgeCSSResult = await new PurgeCSS().purge({
  content: [
    './src/**/*.html',
    './src/**/*.svelte',
    './src/**/*.js',
    './node_modules/@smui/**/*.svelte',
    './node_modules/@smui/**/*.js',
    './node_modules/@smui/**/*.ts',
    './node_modules/@material/**/*.js',
    './node_modules/@material/**/*.ts',
    './node_modules/glightbox/**/*.js',
  ],
  safelist: [
    /g(lightbox|slide|fade|zoom|loader|overlay|container|close|prev|next|btn)/, /^svelte-/,
    /^tippy-/, /data-/,
    'mdc-top-app-bar',
    'mdc-top-app-bar--fixed',
    'mdc-top-app-bar--dense',
    'mdc-top-app-bar__row',
    'mdc-top-app-bar__section',
    'mdc-top-app-bar__section--align-start',
    'mdc-top-app-bar__title',
    'mdc-top-app-bar__section--align-end',
    'mdc-icon-button',
    'mdc-icon-button--display-flex',
    'mdc-top-app-bar__action-item',
    'mdc-ripple-upgraded--unbounded',
    'mdc-ripple-upgraded',
    'mdc-icon-button__ripple',
    'mdc-top-app-bar--fixed-adjust',
    'mdc-drawer',
    'mdc-drawer--dismissible',
    'mdc-drawer__content',
    'mdc-deprecated-list',
    'mdc-deprecated-list-item',
    'mdc-deprecated-list-item--activated',
    'mdc-deprecated-list-item__ripple',
    'mdc-deprecated-list-item__graphic',
    'mdc-deprecated-list-item__text',
    'mdc-deprecated-list-divider',
    'mdc-deprecated-list-group__subheader',
    'mdc-form-field',
    'mdc-switch',
    'mdc-switch--selected',
    'mdc-switch__track',
    'mdc-switch__handle-track',
    'mdc-switch__handle',
    'mdc-switch__shadow',
    'mdc-elevation-overlay',
    'mdc-switch__ripple',
    'mdc-switch__icons',
    'mdc-switch__icon',
    'mdc-switch__icon--on',
    'mdc-switch__icon--off',
    'mdc-top-app-bar--dense-fixed-adjust',
    'mdc-drawer-app-content',
    'mdc-layout-grid',
    'mdc-layout-grid__inner',
    'mdc-layout-grid__cell',
    'mdc-layout-grid__cell--span-12',
    'mdc-typography--headline4',
    'mdc-layout-grid__cell--span-3-desktop',
    'mdc-layout-grid__cell--span-6-desktop',
    'mdc-layout-grid__cell--span-8-tablet',
    'mdc-layout-grid__cell--span-4-phone',
    'mdc-fab',
    'mdc-fab--extended',
    'mdc-fab__ripple',
    'mdc-fab__icon',
    'mdc-fab__label',
    'mdc-drawer--open',
    'mdc-typography--body1',
    'mdc-typography--headline6',
    'mdc-layout-grid__cell--span-9-desktop',
    'mdc-tab-bar',
    'mdc-tab-scroller',
    'mdc-tab-scroller__scroll-area',
    'mdc-tab-scroller__scroll-area--scroll',
    'mdc-tab-scroller__scroll-content',
    'mdc-tab',
    'mdc-tab--active',
    'mdc-tab__content', 'mdc-tab__text-label',
    'mdc-tab-indicator',
    'mdc-tab-indicator--active',
    'mdc-tab-indicator__content',
    'mdc-tab-indicator__content--underline',
    'mdc-tab__ripple',
    'mdc-layout-grid__cell--span-4-desktop',
    'mdc-layout-grid__cell--span-3-tablet',
    'mdc-layout-grid__cell--span-1-phone',
    'mdc-layout-grid__cell--span-8-desktop',
    'mdc-layout-grid__cell--span-5-tablet',
    'mdc-layout-grid__cell--span-3-phone',
    'mdc-linear-progress',
    'mdc-linear-progress--animation-ready',
    'mdc-linear-progress__buffer',
    'mdc-linear-progress__buffer-bar',
    'mdc-linear-progress__buffer-dots',
    'mdc-linear-progress__bar',
    'mdc-linear-progress__primary-bar',
    'mdc-linear-progress__bar-inner',
    'mdc-linear-progress__secondary-bar',
    'mdc-layout-grid__cell--span-2-desktop',
    'mdc-layout-grid__cell--span-2-tablet',
    'mdc-layout-grid__cell--span-10-desktop',
    'mdc-layout-grid__cell--span-6-tablet',
    'mdc-card',
    'mdc-card--outlined',
    'mdc-chip__icon',
    'mdc-chip__icon--leading',
    'mdc-card__media',
    'mdc-card__media--16-9',
    'mdc-typography--headline5',
    'mdc-typography--subtitle2',
    'mdc-deprecated-list--non-interactive',
    'mdc-deprecated-list-item__primary-text',
    'mdc-deprecated-list-item__secondary-text',
    'mdc-image-list',
    'mdc-image-list__item',
    'mdc-image-list__image-aspect-container',
    'mdc-image-list__image',
  ],
  css: ['./public/*.css'],
})

fs.writeFileSync('./public/smui.css', purgeCSSResult[0].css)
